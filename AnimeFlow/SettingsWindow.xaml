<Window x:Class="AnimeFlow.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        Title="Settings" 
        Height="500" 
        Width="700"
        WindowStartupLocation="CenterOwner"
        Background="#FF1E1E1E"
        ResizeMode="NoResize"
        ui:WindowHelper.UseModernWindowStyle="True">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TabControl Grid.Row="0" Margin="10">
            <!-- General Tab -->
            <TabItem Header="General">
                <StackPanel Margin="20">
                    <TextBlock Text="General Settings" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,20"/>
                    
                    <CheckBox x:Name="AutoStartInterpolationCheck" Content="Auto-start interpolation on playback" Foreground="White" Margin="0,0,0,10"/>
                    <CheckBox x:Name="CheckUpdatesCheck" Content="Check for updates on startup" Foreground="White" Margin="0,0,0,10"/>
                    <CheckBox x:Name="RememberWindowStateCheck" Content="Remember window state" Foreground="White" Margin="0,0,0,10"/>
                    <CheckBox x:Name="ShowOsdMessagesCheck" Content="Show OSD messages" Foreground="White" Margin="0,0,0,20"/>
                    
                    <TextBlock Text="Default Quality Preset:" Foreground="White" Margin="0,0,0,10"/>
                    <ComboBox x:Name="DefaultPresetCombo" Width="200" HorizontalAlignment="Left">
                        <ComboBoxItem Content="Fast"/>
                        <ComboBoxItem Content="Balanced" IsSelected="True"/>
                        <ComboBoxItem Content="Beauty"/>
                        <ComboBoxItem Content="Custom"/>
                    </ComboBox>
                </StackPanel>
            </TabItem>

            <!-- Video Tab -->
            <TabItem Header="Video">
                <StackPanel Margin="20">
                    <TextBlock Text="Video Settings" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,20"/>
                    
                    <TextBlock Text="GPU API:" Foreground="White" Margin="0,0,0,10"/>
                    <ComboBox x:Name="GpuApiCombo" Width="200" HorizontalAlignment="Left" Margin="0,0,0,20">
                        <ComboBoxItem Content="Vulkan" IsSelected="True"/>
                        <ComboBoxItem Content="D3D11"/>
                        <ComboBoxItem Content="OpenGL"/>
                    </ComboBox>
                    
                    <TextBlock Text="Hardware Decoding:" Foreground="White" Margin="0,0,0,10"/>
                    <ComboBox x:Name="HwdecCombo" Width="200" HorizontalAlignment="Left" Margin="0,0,0,20">
                        <ComboBoxItem Content="auto-safe" IsSelected="True"/>
                        <ComboBoxItem Content="auto"/>
                        <ComboBoxItem Content="no"/>
                    </ComboBox>
                    
                    <CheckBox x:Name="DebandCheck" Content="Enable debanding" Foreground="White" IsChecked="True"/>
                </StackPanel>
            </TabItem>

            <!-- Interpolation Tab -->
            <TabItem Header="Interpolation">
                <StackPanel Margin="20">
                    <TextBlock Text="Interpolation Settings" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,20"/>
                    
                    <TextBlock Text="Target Resolution:" Foreground="White" Margin="0,0,0,10"/>
                    <ComboBox x:Name="TargetResolutionCombo" Width="200" HorizontalAlignment="Left" Margin="0,0,0,20">
                        <ComboBoxItem Content="540p"/>
                        <ComboBoxItem Content="720p" IsSelected="True"/>
                        <ComboBoxItem Content="1080p"/>
                        <ComboBoxItem Content="Native"/>
                    </ComboBox>
                    
                    <TextBlock Text="Scene Change Threshold:" Foreground="White" Margin="0,0,0,10"/>
                    <Slider x:Name="SceneThresholdSlider" Minimum="0.05" Maximum="0.30" Value="0.15" Width="300" HorizontalAlignment="Left" Margin="0,0,0,5"/>
                    <TextBlock x:Name="SceneThresholdText" Text="0.15" Foreground="#FFAAAAAA" Margin="0,0,0,20"/>
                    
                    <CheckBox x:Name="UhdModeCheck" Content="Enable UHD mode (4K content)" Foreground="White"/>
                </StackPanel>
            </TabItem>

            <!-- Advanced Tab -->
            <TabItem Header="Advanced">
                <StackPanel Margin="20">
                    <TextBlock Text="Advanced Settings" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,20"/>
                    
                    <CheckBox x:Name="EnableLoggingCheck" Content="Enable logging" Foreground="White" IsChecked="True" Margin="0,0,0,10"/>
                    
                    <TextBlock Text="Log Level:" Foreground="White" Margin="0,0,0,10"/>
                    <ComboBox x:Name="LogLevelCombo" Width="200" HorizontalAlignment="Left" Margin="0,0,0,20">
                        <ComboBoxItem Content="Debug"/>
                        <ComboBoxItem Content="Info" IsSelected="True"/>
                        <ComboBoxItem Content="Warning"/>
                        <ComboBoxItem Content="Error"/>
                    </ComboBox>
                    
                    <TextBlock Text="Cache Size (MB):" Foreground="White" Margin="0,0,0,10"/>
                    <TextBox x:Name="CacheSizeText" Width="200" HorizontalAlignment="Left" Text="400" Margin="0,0,0,20"/>
                    
                    <StackPanel Orientation="Horizontal">
                        <Button Content="Open Logs Folder" Width="120" Margin="0,0,10,0" Click="OpenLogsFolder_Click"/>
                        <Button Content="Clear Cache" Width="120" Margin="0,0,10,0" Click="ClearCache_Click"/>
                        <Button Content="Reset to Defaults" Width="120" Click="ResetDefaults_Click"/>
                    </StackPanel>
                </StackPanel>
            </TabItem>
        </TabControl>

        <!-- Bottom Buttons -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="10">
            <Button Content="Cancel" Width="80" Height="32" Margin="0,0,10,0" Click="Cancel_Click"/>
            <Button Content="Apply" Width="80" Height="32" Margin="0,0,10,0" Click="Apply_Click"/>
            <Button Content="OK" Width="80" Height="32" Click="OK_Click" IsDefault="True"/>
        </StackPanel>
    </Grid>
</Window>
